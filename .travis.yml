language: php

php:
 - 7.0

services:
  - mysql

before_script:
  - cp .env.travis .env
  - mysql -e 'create database testing;'
  - composer self-update
  - composer install --no-interaction
  - php artisan key:generate

script:
  - vendor/bin/phpunit
  - vendor/bin/phpcs -n --colors -p ./app/*.php ./app/Http/Controllers/**/*.php ./tests/*.php
  - vendor/bin/phpmd 'app,tests' text 'phpmd-ruleset.xml'

notifications:
  slack:
    rooms:
      - dashboard-hbo-ict:gLQnLByGt7u5FCPaRVB8LPm2#teamblauw
